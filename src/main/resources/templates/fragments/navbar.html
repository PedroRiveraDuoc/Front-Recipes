<nav class="bg-white border-b border-gray-200 dark:bg-gray-900" id="navbar" th:fragment="navbar(username)">
  <div class="max-w-screen-xl mx-auto p-4 flex flex-col md:flex-row items-center justify-between">
    <!-- Logo -->
    <a href="/home" class="flex items-center justify-center space-x-3 rtl:space-x-reverse">
      <img src="/images/logo.png" class="h-12 w-12 rounded-full" alt="Recetas Logo" />
      <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">Recetas</span>
    </a>

    <!-- Botón de Menú Móvil -->
    <button
      type="button"
      class="inline-flex items-center p-2 ml-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
      aria-controls="mobile-menu"
      aria-expanded="false"
      id="menu-btn"
    >
      <span class="sr-only">Abrir menú principal</span>
      <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path
          fill-rule="evenodd"
          d="M3 5h14a1 1 0 010 2H3a1 1 0 010-2zm0 6h14a1 1 0 010 2H3a1 1 0 010-2zm0 6h14a1 1 0 010 2H3a1 1 0 010-2z"
          clip-rule="evenodd"
        ></path>
      </svg>
    </button>

    <!-- Menú de Navegación (Escritorio) -->
    <div class="hidden md:flex md:items-center md:justify-center md:space-x-8 w-full" id="navbar-cta">
      <ul class="flex flex-col md:flex-row font-medium items-center justify-center space-x-0 md:space-x-8">
        <li>
          <a href="/home" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
            Inicio
          </a>
        </li>
        <li>
          <a href="/recipes" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
            Recetas
          </a>
        </li>
        <li>
          <a href="#" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
            Categorías
          </a>
        </li>
        <li>
          <a href="#" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
            Contacto
          </a>
        </li>
      </ul>
    </div>

    <!-- Opciones de Sesión (Centradas) -->
    <div class="flex items-center justify-center space-x-4 text-gray-700 dark:text-white">
      <!-- Saludo y Cierre de Sesión cuando el usuario está autenticado -->
      <span th:if="${username != null and username != 'anonymousUser'}">
        Hola, <span th:text="${username}" class="font-bold">Usuario</span>!
      </span>
      <a th:if="${username != null and username != 'anonymousUser'}" href="/logout" class="text-green-500 hover:underline dark:text-green-300">
        Cerrar sesión
      </a>

      <!-- Enlace de Iniciar Sesión cuando el usuario no está autenticado -->
      <a th:if="${username == null or username == 'anonymousUser'}" href="/login" class="text-green-500 hover:underline dark:text-green-300">
        Iniciar sesión
      </a>
    </div>
  </div>

  <!-- Menú Móvil (Centrado) -->
  <div class="hidden" id="mobile-menu">
    <ul class="flex flex-col items-center py-4 px-8 bg-gray-50 dark:bg-gray-800">
      <li>
        <a href="/home" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
          Inicio
        </a>
      </li>
      <li>
        <a href="/recipes" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
          Recetas
        </a>
      </li>
      <li>
        <a href="#" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
          Categorías
        </a>
      </li>
      <li>
        <a href="#" class="block py-2 px-3 text-gray-900 hover:text-green-700 dark:text-white dark:hover:text-green-500 text-center">
          Contacto
        </a>
      </li>
    </ul>
  </div>
</nav>
